version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Installing dependencies..."
        - npm install
        - echo "Dependencies installed successfully"
    build:
      commands:
        - echo "Setting up backend application with Amplify..."
        - echo "Using amplify-app.js as main entry point"
        - echo "Creating simple HTML for Amplify..."
        - echo "<html><body><h1>Backend API</h1><p>API is running at /api</p></body></html>" > public/index.html
        - echo "Backend build completed"
        - echo "Build phase completed successfully"
        - echo "Application ready for deployment"
  artifacts:
    baseDirectory: /
    files:
      - '**/*'
      - '!node_modules/**/*'
      - '!.git/**/*'
      - '!amplify.yml'
      - '!test-*.js'
  cache:
    paths:
      - node_modules/**/* 